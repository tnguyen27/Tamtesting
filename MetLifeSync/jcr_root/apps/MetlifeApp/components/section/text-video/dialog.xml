<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
    jcr:primaryType="cq:Dialog"
    height="440"
    title="Text &amp; Video"
    width="800"
    xtype="dialog">
    <items
        jcr:primaryType="cq:Widget"
        xtype="tabpanel">
        <items jcr:primaryType="cq:WidgetCollection">
            <tab-general
                jcr:primaryType="cq:Panel"
                title="General">
                <items jcr:primaryType="cq:WidgetCollection">
                    <title
                        jcr:primaryType="nt:unstructured"
                        allowBlank="true"
                        fieldLabel="Title"
                        name="./title"
                        xtype="textfield"/>
                    <subtitle
                        jcr:primaryType="nt:unstructured"
                        allowBlank="true"
                        fieldDescription="Enter some text for the title and the subtittle&lt;br>&lt;br>"
                        fieldLabel="Sub Title"
                        name="./subTitle"
                        xtype="textfield"/>
                    <files
                        jcr:primaryType="cq:Widget"
                        fieldDescription="Click the '+' to add a new item"
                        fieldLabel="Files"
                        name="./files"
                        xtype="multifield">
                        <fieldConfig
                            jcr:primaryType="cq:Widget"
                            xtype="multifieldpanel">
                            <items jcr:primaryType="cq:WidgetCollection">
                                <image
                                    jcr:primaryType="cq:Widget"
                                    allowBlank="false"
                                    anchor="90%"
                                    editable="{Boolean}false"
                                    fieldLabel="Image"
                                    key="icon"
                                    name="./fileIcons/fileReferences"
                                    rootPath="/content/dam"
                                    validateOnBlur="true"
                                    xtype="pathfield"/>
                                <imageAlt
                                    jcr:primaryType="nt:unstructured"
                                    allowBlank="false"
                                    anchor="90%"
                                    fieldLabel="Image Alt"
                                    key="imageAlt"
                                    xtype="textfield"/>
                                <text
                                    jcr:primaryType="nt:unstructured"
                                    allowBlank="false"
                                    anchor="90%"
                                    fieldLabel="Text"
                                    key="text"
                                    xtype="textfield"/>
                                <fileSize
                                    jcr:primaryType="nt:unstructured"
                                    allowBlank="false"
                                    anchor="90%"
                                    fieldLabel="File Size"
                                    key="size"
                                    xtype="textfield"/>
                                <link
                                    jcr:primaryType="cq:Widget"
                                    allowBlank="false"
                                    anchor="90%"
                                    editable="{Boolean}false"
                                    fieldLabel="Link"
                                    key="link"
                                    rootPath="/content/metlife"
                                    xtype="pathfield"/>
                            </items>
                        </fieldConfig>
                    </files>
                    <filesField
                        jcr:primaryType="nt:unstructured"
                        _x0031__x0020_ignoreData="true"
                        name="./files@TypeHint"
                        value="String[]"
                        xtype="hidden"/>
                    <imageNode
                        jcr:primaryType="nt:unstructured"
                        ignoreData="true"
                        name="./fileIcons/sling:resourceType"
                        value="xumakbase/components/section/base"
                        xtype="hidden"/>
                </items>
            </tab-general>
            <video
                jcr:primaryType="cq:Panel"
                title="Video">
                <items jcr:primaryType="cq:WidgetCollection">
                    <video-type
                        jcr:primaryType="cq:Widget"
                        fieldLabel="Video Type"
                        name="./videotype"
                        type="select"
                        xtype="selection">
                        <options jcr:primaryType="cq:WidgetCollection">
                            <brightcove
                                jcr:primaryType="nt:unstructured"
                                text="Brightcove"
                                value="option_a"/>
                            <youtube
                                jcr:primaryType="nt:unstructured"
                                text="Youtube"
                                value="option_b"/>
                        </options>
                        <listeners
                            jcr:primaryType="nt:unstructured"
                            loadcontent="function() {&#xa;        var a = this.nextSibling().setVisible(false);&#xa;        var b = a.nextSibling().setVisible(false);&#xa;&#xa;        if(this.getValue() =='undefined'){&#xa;              a.setVisible(false);&#xa;           b.setVisible(false);&#xa;        }else if(this.getValue() == 'option_a'){&#xa;            a.setVisible(true);&#xa;        }else if(this.getValue() == 'option_b'){&#xa;            b.setVisible(true);&#xa;        }&#xa;    }"
                            selectionchanged="function() {&#xa;  var a = this.nextSibling().setVisible(false);&#xa;  var b = a.nextSibling().setVisible(false);&#xa;  var panel = this.findParentByType('panel');&#xa;  var hidden = panel.getComponent(3);&#xa;  &#xa;  if(this.getValue() == 'option_a'){&#xa;    a.setVisible(true);&#xa;    b.setVisible(false);&#xa;    hidden.setValue(this.getValue());&#xa;  &#xa;  }else if(this.getValue() == 'option_b'){&#xa;    a.setVisible(false);&#xa;    b.setVisible(true);&#xa;    hidden.setValue(&quot;&quot;);&#xa;  &#xa;  }&#xa;}"/>
                    </video-type>
                    <brightcove-video-id
                        jcr:primaryType="nt:unstructured"
                        fieldDescription="Enter the video id for brightcove. (eg: 3891257518001 )"
                        fieldLabel="Brightcove video ID"
                        hidden="{Boolean}true"
                        maxLength="150"
                        name="./brightcovevideoid"
                        xtype="textfield"/>
                    <youtubevideoid
                        jcr:primaryType="nt:unstructured"
                        fieldDescription="Enter the video id for youtube. (eg: https://www.youtube.com/watch?v=&lt;b>CMkeicTX0Tc&lt;/b>)"
                        fieldLabel="Youtube video ID"
                        hidden="{Boolean}true"
                        maxLength="150"
                        name="./youtubevideoid"
                        xtype="textfield"/>
                    <isBrightcove
                        jcr:primaryType="nt:unstructured"
                        name="./isBrightcove"
                        xtype="hidden"/>
                </items>
            </video>
            <disclaimer
                jcr:primaryType="cq:Panel"
                title="Disclaimer">
                <items jcr:primaryType="cq:WidgetCollection">
                    <text
                        jcr:primaryType="cq:Widget"
                        anchor="90%"
                        fieldLabel="Text"
                        height="260"
                        name="./disclaimer"
                        xtype="richtext">
                        <rtePlugins jcr:primaryType="nt:unstructured">
                            <subsuperscript
                                jcr:primaryType="nt:unstructured"
                                features="*"/>
                        </rtePlugins>
                    </text>
                </items>
            </disclaimer>
        </items>
    </items>
</jcr:root>
